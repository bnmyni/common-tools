global
	log 127.0.0.1 local2
	chroot /var/lib/haproxy
	pidfile /var/run/haproxy.pid
	maxconn 4000
	user haproxy
	group haproxy
	daemon
defaults
	mode tcp
	log global
	option httplog
	option dontlognull
	retries 3
	timeout http-request 10s
	timeout queue 1m
	timeout connect 10s
	timeout client 1m
	timeout server 1m
	timeout http-keep-alive 10s
	timeout check 10s
	maxconn 600
listen stats
	mode http
	bind 0.0.0.0:1080
	stats enable
	stats hide-version
	stats uri /haproxyadmin?stats
	stats realm Haproxy\ Statistics
	stats auth admin:admin
	stats admin if TRUE
frontend webservs
	bind *:80
	acl url_static path_beg -i /static /images /javascript /stylesheets
	acl url_static path_end -i .jpg .gif .png .css .js .html
	acl url_php path_end -i .php
	acl host_static hdr_beg(host) -i img. imgs. video. videos. ftp. image. download.
	use_backend static if url_static or host_static
	use_backend dynamic if url_php
	default_backend dynamic
backend static
	balance roundrobin
	server node1 192.168.1.111:80 check maxconn 3000
backend dynamic
	balance roundrobin
	server node2 192.168.1.112:80 check maxconn 1000